{% extends "base.html" %}

{% block title %}Sign up{% endblock %}

{% block footer %}

<script src="/js/hideShowPassword.min.js"></script> <!-- jquery plugin skinut s neta koji pravi kucicu za prikazivanje passworda -->
<script src="/js/app.js"></script> <!-- deo koji se bavi validacijom password-a u jquery-iju -->

<script>
        $(document).ready(function() {

            /**
             * Validate the form
             */
            $('#formSignup').validate({
                rules: {
                    name: 'required',
                    email: {
                        required: true,
                        email: true,
                        remote: '/account/validateemail' // nejasno ostaje kako radi i sa '/account/validateemail' sa ovom crticom  kako je navedeno u tutorijalu posto action u Account controlleru se zove validateEmail, verovatno je tako podesen regex koji razaznaje url-ove u osnovi MVC framework-a
                    },
                    password: {
                        required: true,
                        minlength: 6,
                        validPassword: true
                    },
                },
                messages: { // sets custom messages
                    email: {
                        remote: 'email already taken' // custom message for the email verification
                    }
                }
            });
            $('#inputPassword').hideShowPassword({ // kucica za prikazivanje passworda (radi koristeci gore ucitanu jquery skriptu)
                show: false,
                innerToggle: 'focus'
            });
        });
</script>
{% endblock %}

{% block body %}

<h1>Sign up</h1>

<!-- deo koji proverava da li postoje greske koje su prosledjene bekendu i ispisuje ih -->
{% if user.errors is not empty %}
    <p>Errors:</p>
    <ul>{% for error in user.errors %}
        <li>{{error}}</li>
    {% endfor %}
    </ul>
{% endif %}    


<form method="POST" action="/signup/create" id="formSignup">
    <div class="form-group">
        <label for="inputName">Name</label> <!-- u value propertiju inputa pomocu twig-a mozemo da koristimo vrednost prosledjenog asocijativnog niza kako se ne bi moralo ponovo ukucavati celo ime ili email u drugom slucaju -->
                <input id="inputName" name='name' placeholder="Name" autofocus value="{{ user.name }}" required class="form-control"/>
    </div>
    <div class="form-group">
        <label for="inputEmail">Email Address</label>
                <input id="inputEmail" name='email' placeholder="email address" autofocus value="{{ user.email }}" required type="email" class="form-control" />
    </div>
    <div class="form-group">
        <label for="inputPassword">Password</label>
                <input type="password" id="inputPassword" name='password' placeholder="Password" autofocus required class="form-control" />
                <!-- pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$" title="Minimum 6 chars, at least one letter and number" /> -->
                <!-- u pattern propertiju mozemo da koristimo regexe za validaciju, ovaj proverava da li ima 6 karaktera i da li ima po bar jedno slovo i broj, s tim sto je koriscenje pattern propertija nepouzdano -->
                <!-- u title properti unosimo ono sto zelimo da bude ispisano ako unos ne prodje html validaciju -->
    </div>

    <button type="submit" class="btn btn-primary">Sign up</button>
</form>

{% endblock %}